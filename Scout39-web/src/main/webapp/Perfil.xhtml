<ui:composition template="templates/principal.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
    <ui:define name="title">Perfil</ui:define>
    <ui:define name="seccionnav">Perfil Usuario</ui:define>
    <ui:define name="perfil">
        <!--<div class="col-md-8">-->
        <div class="col-xs-12 col-sm-12 col-md-10 col-lg-10 col-xs-offset-0 col-sm-offset-0 col-md-offset-1 col-lg-offset-1 mx-auto">
            <div class="card border-secondary">
                <div class="card-header">
                    <h3 class="card-title white-text">Informacion del Usuario</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 col-lg-3 hidden-xs hidden-sm">
                            <img class="img-circle" src="https://lh5.googleusercontent.com/-b0-k99FZlyE/AAAAAAAAAAI/AAAAAAAAAAA/eu7opA4byxI/photo.jpg?sz=100" alt="User Pic"/>
                        </div>
                        <div class=" col-md-9 col-lg-9 hidden-xs hidden-sm">
                            <strong>Usuario</strong>
                            <br/>
                            <table class="table table-user-information">
                                <tbody>
                                    <tr>
                                        <td>Alias:</td>
                                        <td>#{controlAutorizacion.usuario.alias}</td>
                                    </tr>
                                    <tr>
                                        <td>Nombre:</td>
                                        <td>#{controlAutorizacion.usuario.nombre}</td>
                                    </tr>
                                    <tr>
                                        <td>Apellidos</td>
                                        <td>#{controlAutorizacion.usuario.apellidos}</td>
                                    </tr>
                                    <tr>
                                        <td>Email</td>
                                        <td>#{controlAutorizacion.usuario.email}</td>
                                    </tr>
                                    <tr>
                                        <td>Fecha Alta</td>
                                        <td>#{controlAutorizacion.usuario.fecha_alta}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="card-footer">
                    <div class="container">
                        <div class="row">
                            <a class="btn btn-sm btn-purple col" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample" data-original-title="Ver Documentos">Ver documentos</a>

                            <a class="btn btn-sm btn-purple col" data-toggle="collapse" data-target="#viewPromesa" aria-expanded="false" aria-controls="viewPromesa" data-original-title="Vew Promesa">Ver Promesa</a>
                            <h:form enctype="multipart/form-data" class="row">
                                <h:inputFile class="col" value="#{fileUploadMBean.file}" id="fileUpload" />
                                <h:commandButton class ="btn btn-sm btn-purple col" value="Subir" action="#{fileUploadMBean.uploadFile()}"></h:commandButton>
                            </h:form>
                        </div>
                        <div class="collapse" id="collapseExample">
                            <div class="mt-3">
                                <!--Table-->
                                <table class="table table-bordered table-striped">

                                    <!--Table head-->
                                    <thead class=" mdb-color darken-3" >
                                        <tr class="text-white">
                                            <th>Nombre</th>
                                            <th>Tipo</th>
                                            <th>Link</th>
                                        </tr>
                                    </thead>
                                    <!--Table head-->

                                    <!--Table body-->

                                    <tbody>
                                        <c:forEach items="#{beanPerfil.getUserFiles(controlAutorizacion.usuario)}" var="a">
                                            <div class="mx-auto">
                                                <tr>
                                                    <h:form>
                                                        <td>#{a.nombre}</td>
                                                        <td>#{a.tipo}</td>
                                                        <td><h:outputLink class ="btn btn-sm btn-purple center" value = "#{fileUploadMBean.getPath(a.ruta)}">Descargar</h:outputLink>
                                                            <h:commandButton class="btn btn-sm btn-red center" value="Borrar" action="#{fileUploadMBean.deleteFile(a)}"></h:commandButton></td>
                                                    </h:form>
                                                </tr>
                                            </div>
                                        </c:forEach>
                                    </tbody>
                                    <!--Table body-->

                                </table>
                                <!--Table-->

                            </div>
                        </div>
                        <div class="collapse" id="viewPromesa">
                            <div class="mt-3">
                                <!--Table-->
                                <!--                    <c:forEach items="#/{beanPerfil.promesas}" var="entry">
                                                        <p>Key: <h:outputText value="#/{entry.key}" /></p>
                                                        <h:dataTable value="#/{entry.value}" var="evento">
                                                            <h:column><h:outputText value="#/{evento}" /></h:column>
                                                        </h:dataTable>
                                                    </c:forEach>-->
                                <p>Evento: <h:outputText value="#Evento1" /></p>
                                <h:dataTable value="Promesa" var="evento">
                                    <h:column><h:outputText value="Hola bueno diaa!" /></h:column>
                                </h:dataTable>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>
