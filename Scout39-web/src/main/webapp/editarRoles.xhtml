<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<ui:composition template="templates/principal.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:cc="http://xmlns.jcp.org/jsf/composite">


    <ui:define name="title">Coordinador</ui:define>    
    <ui:define name="link1"><h:link class="nav-link text-white" outcome="editarUsuarios.xhtml" value="Editar usuarios"/></ui:define>
    <ui:define name="link2"><h:link class="nav-link text-white" outcome="editarRoles.xhtml" value="Roles"/></ui:define>
    <ui:define name="seccionnav"> Roles</ui:define>
    <ui:define name="tablaUsuarios">


        <center> 
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-default mt-4" data-toggle="modal" data-target="#crearRol">
                Crear nuevo rol
            </button> 
            <div class="modal fade" id="crearRol" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header text-center">
                            <h4 class="modal-title w-100 font-weight-bold">Modificar Usuario</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">x</span>
                            </button>
                        </div>
                        <div class="modal-body mx-3">
                            <h:form id="formCrearRol">
                                <!-- Material input text -->
                                <div class="md-form">                                                
                                    <h:inputText class="form-control" id="nombreR" />
                                    <h:outputLabel>Nombre Rol</h:outputLabel>
                                </div>

                                <div class="text-center mt-4">
                                    <h:commandButton class="btn btn-orange" value="Crear" action="#{beanRoles.crearRol()}"/>
                                </div>
                            </h:form>
                        </div>
                    </div>
                </div>
            </div>



            <div class="col-md-8">
                <!--Table-->
                <!--FILAS DE LA TABLA, EL CUERPO-->

                <h:dataTable id="table" value="#{beanRoles.obtenerRoles()}" var="r" styleClass="table table-striped table-responsive-md btn-table">
                    <!--Table head-->
                    <h:column>
                        <f:facet name="header">CÃ³digo</f:facet>
                            #{r.id.toString()}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Nombre</f:facet>
                            #{r.nombrerol.toString()}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Modificar</f:facet>
                        <button class="btn btn-orange btn-rounded mb-3" data-toggle="modal" data-target="#modalModificarRol#{r.id.toString()}">Modificar</button>
                        <div class="modal fade" id="modalModificarRol#{r.id.toString()}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header text-center">
                                        <h4 class="modal-title w-100 font-weight-bold">Modificar Usuario</h4>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">x</span>
                                        </button>
                                    </div>
                                    <div class="modal-body mx-3">
                                        <c:forEach items="#{beanRoles.obtenerObjetos()}" var="o">
                                            <h:form id="formModificarPrivilegio#{o.id.toString()}">
                                                <!-- Material input text -->
                                                <div class="md-form">                                                
                                                    <h:outputText class="form-control" id="modificarNombre" value="#{o.nombre}"/>

                                                </div>
                                                #{beanRoles.hasPriv(r, o)}
                                                <c:choose >
                                                    <c:when test="#{beanRoles.peine}" >
                                                        <div class="md-form">
                                                            #{beanRoles.setCRUD(r, o)}
                                                            #{beanRoles.setInverso(r, o)}
                                                            <select class="custom-select" id="modificarCreate">
                                                                <option selected="selected"  value="#{beanRoles.c}">#{beanRoles.c}</option>
                                                                <option value="#{beanRoles.cI}">#{beanRoles.cI}</option>
                                                            </select>
                                                        </div>
                                                        <div class="md-form">
                                                            <select class="custom-select" id="modificarRead">
                                                                <option selected="selected"  value="#{beanRoles.re}">#{beanRoles.re}</option>
                                                                <option value="#{beanRoles.reI}">#{beanRoles.reI}</option>
                                                            </select>
                                                        </div>
                                                        <div class="md-form">
                                                            <select class="custom-select" id="modificarUpdate">
                                                                <option selected="selected"  value="#{beanRoles.u}">#{beanRoles.u}</option>
                                                                <option value="#{beanRoles.uI}">#{beanRoles.uI}</option>
                                                            </select>
                                                        </div>
                                                        <div class="md-form">
                                                            <select class="custom-select" id="modificarDelete">
                                                                <option selected="selected"  value="#{beanRoles.pDelete(r, o)}">#{beanRoles.priv}</option>
                                                                <option value="#{beanRoles.pInverso(beanRoles.priv)}">#{beanRoles.pInverso(beanRoles.priv)}</option>
                                                            </select>
                                                        </div>  

                                                    </c:when>

                                                    <c:otherwise > 
                                                        <div class="md-form">
                                                            <select class="custom-select" id="modificarCreate">
                                                                <option selected="selected" value="N">N</option>
                                                                <option value="S">S</option>
                                                            </select>
                                                        </div>
                                                        <div class="md-form">
                                                            <select class="custom-select" id="modificarRead">
                                                                <option selected="selected" value="N">N</option>
                                                                <option value="S">S</option>
                                                            </select>
                                                        </div>
                                                        <div class="md-form">
                                                            <select class="custom-select" id="modificarUpdate">
                                                                <option selected="selected" value="N">N</option>
                                                                <option value="S">S</option>
                                                            </select>
                                                        </div>
                                                        <div class="md-form">
                                                            <select class="custom-select" id="modificarDelete">
                                                                <option selected="selected" value="N">N</option>
                                                                <option value="S">S</option>
                                                            </select>
                                                        </div>




                                                    </c:otherwise>
                                                </c:choose>

                                                <div class="text-center mt-4">
                                                    <h:commandButton class="btn btn-orange" value="Modificar" />
                                                </div>
                                            </h:form>
                                        </c:forEach>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Borrar</f:facet>
                        <!-- row record -->
                        <button class="btn btn-danger btn-rounded mb-3" data-toggle="modal" data-target="#removeModal#{r.id.toString()}">Eliminar</button>
                    </h:column>
                    <!--Table head-->

                    <!--FILAS DE LA TABLA, EL CUERPO-->


                    <!--Table body-->



                </h:dataTable>   


                <!--Table-->

            </div>
        </center>
    </ui:define>
    <ui:define name="sectionh">Novedades</ui:define>

</ui:composition>
